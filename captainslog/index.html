<!DOCTYPE html>

<html>

<head>
	<title>Captain's Log</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
	<script>
		$(document).ready(function(){
			var storedMessages = [];
			var tempMsg =localStorage.getItem("messages");
			tempMsg = JSON.parse(tempMsg);
			if (tempMsg != null) { // found data in localstorage

				for (var i = 0; i < tempMsg.length; i++){
					//for each item in the array, add it to the webpage in a list
					$("#log").prepend( "<li>" + JSON.stringify(tempMsg[i]) + '</li>');
					}
				// set the storedMessages with what was in local storage to begin with 
				storedMessages = tempMsg; 
			}

	  		$("#msg").keypress(function(event) {
				if (event.which == 13) {

					var input = $("#msg").val(); 
					// obtain the input
				
					var date = new Date;
					//obtain the date 

					var totalMessage = date + " - " + input;
					// combine the date and message into one string 

					$("#log").prepend( "<li>" + JSON.stringify(totalMessage) + "</li>");
					// add that message to the webpage following a list format

					storedMessages.push(totalMessage);
					//add the new message to the array 
					localStorage.setItem("messages", JSON.stringify(storedMessages));
					// adds the newly updated array into localstorage!
	  			}
	  		});


		});

	 
	</script>
</head>

<body>
	<h1>Captain's Log</h1>
	<h3>New entry: <input type="text" id="msg" name="msg" size="30" /></h3>
	<div id="log"></div>
</body>
</html>