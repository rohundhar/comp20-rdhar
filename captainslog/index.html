<!DOCTYPE html>

<html>

<head>
	<title>Captain's Log</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
	<script>
		//var element = document.getElementById('log');
		//element.innerHTML = output;

		$(document).ready(function(){
			var itemCount = 0;
			var msgArray = [];
			var storedMsg = [];
			var tempMsg =localStorage.getItem("messages");
			tempMsg = JSON.parse(tempMsg);
			if (tempMsg != null) {
				console.log("FOUND THINGS IN LOCALSTORAGE");
				//print out objects in the msgArray
				for (var i = 0; i < tempMsg.length; i++){
					console.log("Starting printing loop...");
					
					$("#log").prepend( "<li>" + JSON.stringify(tempMsg[i]) + '</li>');
					}
				console.log("skipped for loop...");
				console.log("Stored messages:", tempMsg);
				console.log("stored length: ",tempMsg.length);
				storedMsg = tempMsg;
			}//when somebody presses enter into the box

	  		$("#msg").keypress(function(event) {
				if (event.which == 13) {
				// add a list item
					//create message variable to store
					var input = $("#msg").val(); 
					//create the date item to store
					var date = new Date;
					//create the total message
					var totalMessage = date + " - " + input;
					//prepend message to the list
					$("#log").prepend( "<li>" + JSON.stringify(totalMessage) + "</li>");
					//add the new message to the front of the array
					storedMsg.push(totalMessage);
					localStorage.setItem("messages", JSON.stringify(storedMsg));
					console.log(JSON.stringify(storedMsg));
	  			}
	  		});


		});

	 
	</script>
</head>

<body>
	<h1>Captain's Log</h1>
	<h3>New entry: <input type="text" id="msg" name="msg" size="30" /></h3>
	<div id="log"></div>
</body>
</html>